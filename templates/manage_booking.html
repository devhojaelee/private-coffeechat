{% extends "base.html" %}

{% block title %}ì˜ˆì•½ ê´€ë¦¬{% endblock %}

{% block content %}
<div class="card p-5 shadow-sm border-0 coffee-card">
  <div class="text-center mb-4">
    <h2 class="mb-3">â˜• ì˜ˆì•½ ê´€ë¦¬</h2>
  </div>

  <div class="booking-info">
    <h5 class="mb-3">ì˜ˆì•½ ì •ë³´</h5>

    <div class="info-row">
      <span class="label">ì´ë¦„:</span>
      <span class="value">{{ booking.name }}</span>
    </div>

    <div class="info-row">
      <span class="label">ì´ë©”ì¼:</span>
      <span class="value">{{ booking.email }}</span>
    </div>

    <div class="info-row">
      <span class="label">ì „í™”ë²ˆí˜¸:</span>
      <span class="value">{{ booking.phone or 'N/A' }}</span>
    </div>

    <div class="info-row">
      <span class="label">ëŒ€í™” ì£¼ì œ:</span>
      <span class="value">{{ booking.purpose or 'N/A' }}</span>
    </div>

    <div class="info-row">
      <span class="label">ì„ íƒ ì‹œê°„:</span>
      <span class="value">{{ booking.selected_slot }}</span>
    </div>

    <div class="info-row">
      <span class="label">ìƒíƒœ:</span>
      <span class="value">
        {% if booking.status == 'confirmed' %}
          <span class="badge bg-success">âœ… ìŠ¹ì¸ë¨</span>
        {% elif booking.status == 'cancelled' %}
          <span class="badge bg-secondary">âŒ ì·¨ì†Œë¨</span>
        {% else %}
          <span class="badge bg-warning text-dark">â³ ëŒ€ê¸° ì¤‘</span>
        {% endif %}
      </span>
    </div>

    {% if booking.status == 'confirmed' and booking.meet_link %}
    <div class="info-row">
      <span class="label">Meet ë§í¬:</span>
      <span class="value">
        <a href="{{ booking.meet_link }}" target="_blank" class="btn btn-sm btn-primary">
          ğŸ”— Google Meet ì°¸ì—¬í•˜ê¸°
        </a>
      </span>
    </div>
    {% endif %}

    {% if booking.confirmed_at %}
    <div class="info-row">
      <span class="label">ìŠ¹ì¸ ì‹œê°:</span>
      <span class="value">{{ booking.confirmed_at }}</span>
    </div>
    {% endif %}
  </div>

  {% if booking.status == 'confirmed' %}
  <div class="mt-4">
    <h5 class="mb-3">ì˜ˆì•½ ìˆ˜ì •/ì·¨ì†Œ</h5>
    <p class="text-muted small">
      ì˜ˆì•½ì„ ë³€ê²½í•˜ê±°ë‚˜ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>

    <div class="d-grid gap-2">
      <a href="/manage/{{ booking.cancel_token }}/change" class="btn coffee-btn-outline">
        ğŸ”„ ì˜ˆì•½ ì‹œê°„ ë³€ê²½
      </a>

      <form method="POST" action="/manage/{{ booking.cancel_token }}/cancel"
            onsubmit="return confirm('ì •ë§ë¡œ ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');">
        <button type="submit" class="btn btn-danger w-100">
          âŒ ì˜ˆì•½ ì·¨ì†Œ
        </button>
      </form>
    </div>
  </div>
  {% elif booking.status == 'cancelled' %}
  <div class="alert alert-secondary mt-4">
    <strong>ğŸ“Œ ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤</strong><br>
    ì·¨ì†Œëœ ì˜ˆì•½ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
  </div>
  {% else %}
  <div class="alert alert-info mt-4">
    <strong>ğŸ“Œ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤</strong><br>
    ê´€ë¦¬ìê°€ ì˜ˆì•½ì„ ìŠ¹ì¸í•˜ë©´ ì´ë©”ì¼ë¡œ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.
  </div>
  {% endif %}

  <a href="/" class="btn coffee-btn w-100 mt-3">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
</div>
{% endblock %}

{% block script %}
<style>
  body {
    background-color: #f3ede7;
    font-family: 'Inter', sans-serif;
    color: #5e4634;
  }

  .coffee-card {
    background-color: #fffdfc;
    border-radius: 1rem;
    max-width: 600px;
    margin: 2rem auto;
  }

  .booking-info {
    background-color: #f9f7f5;
    padding: 1.5rem;
    border-radius: 0.75rem;
    margin-bottom: 1rem;
  }

  .info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #e5e0da;
  }

  .info-row:last-child {
    border-bottom: none;
  }

  .label {
    font-weight: 600;
    color: #6b4c3b;
    flex-shrink: 0;
    margin-right: 1rem;
  }

  .value {
    text-align: right;
    color: #5e4634;
    word-break: break-word;
  }

  .coffee-btn {
    background-color: #6b4c3b;
    color: white;
    border: 1px solid #6b4c3b;
    transition: all 0.2s ease-in-out;
  }

  .coffee-btn:hover {
    background-color: #f3ede7;
    color: #6b4c3b;
    border: 1px solid #6b4c3b;
  }

  .coffee-btn-outline {
    background-color: transparent;
    color: #6b4c3b;
    border: 1px solid #6b4c3b;
    transition: all 0.2s ease-in-out;
  }

  .coffee-btn-outline:hover {
    background-color: #6b4c3b;
    color: white;
  }

  .badge {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
  }

  .alert-info {
    background-color: #e8f4f8;
    border-color: #b3d9e6;
    color: #31708f;
  }

  .alert-secondary {
    background-color: #f5f5f5;
    border-color: #ddd;
    color: #666;
  }
</style>
{% endblock %}
