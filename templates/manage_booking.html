{% extends "base.html" %}

{% block title %}ì˜ˆì•½ ê´€ë¦¬{% endblock %}

{% block content %}
<div class="card p-5 shadow-sm border-0 coffee-card">
  <div class="text-center mb-4">
    <h2>â˜• ì˜ˆì•½ ê´€ë¦¬</h2>
  </div>

  <div class="booking-info mb-4">
    <h5 class="mb-3">ì˜ˆì•½ ì •ë³´</h5>
    <div class="info-row">
      <span class="label">ì´ë¦„:</span>
      <span class="value">{{ booking.name }}</span>
    </div>
    <div class="info-row">
      <span class="label">ì´ë©”ì¼:</span>
      <span class="value">{{ booking.email }}</span>
    </div>
    <div class="info-row">
      <span class="label">ì „í™”ë²ˆí˜¸:</span>
      <span class="value">{{ booking.phone }}</span>
    </div>
    <div class="info-row">
      <span class="label">ì£¼ì œ:</span>
      <span class="value">{{ booking.purpose }}</span>
    </div>
    <div class="info-row">
      <span class="label">ì˜ˆì•½ ì‹œê°„:</span>
      <span class="value">{{ booking.selected_slot }}</span>
    </div>
    <div class="info-row">
      <span class="label">ìƒíƒœ:</span>
      <span class="value">
        {% if booking.status == 'confirmed' %}
          <span class="badge bg-success">ìŠ¹ì¸ë¨</span>
        {% elif booking.status == 'cancelled' %}
          <span class="badge bg-secondary">ì·¨ì†Œë¨</span>
        {% else %}
          <span class="badge bg-warning text-dark">ëŒ€ê¸° ì¤‘</span>
        {% endif %}
      </span>
    </div>

    {% if booking.meet_link and booking.status == 'confirmed' %}
    <div class="info-row">
      <span class="label">Google Meet:</span>
      <span class="value">
        <a href="{{ booking.meet_link }}" target="_blank" class="btn btn-sm btn-primary">ë¯¸íŒ… ì°¸ê°€</a>
      </span>
    </div>
    {% endif %}

    {% if booking.confirmed_at %}
    <div class="info-row">
      <span class="label">ìŠ¹ì¸ ì¼ì‹œ:</span>
      <span class="value">{{ booking.confirmed_at }}</span>
    </div>
    {% endif %}
  </div>

  {% if booking.status == 'confirmed' %}
  <div class="alert alert-warning mb-3">
    <strong>âš ï¸ ì£¼ì˜ì‚¬í•­</strong><br>
    ì˜ˆì•½ì„ ì·¨ì†Œí•˜ë©´ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
    ë³€ê²½ì„ ì›í•˜ì‹œë©´ 'ì˜ˆì•½ ë³€ê²½' ë²„íŠ¼ì„ ì´ìš©í•´ì£¼ì„¸ìš”.
  </div>

  <div class="action-buttons">
    <a href="/manage/{{ booking.cancel_token }}/change" class="btn coffee-btn-outline w-100 mb-2">
      ğŸ”„ ì˜ˆì•½ ë³€ê²½
    </a>

    <form method="POST" action="/manage/{{ booking.cancel_token }}/cancel" onsubmit="return confirm('ì •ë§ ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');">
      <button type="submit" class="btn btn-danger w-100">âŒ ì˜ˆì•½ ì·¨ì†Œ</button>
    </form>
  </div>
  {% elif booking.status == 'cancelled' %}
  <div class="alert alert-secondary text-center">
    ì´ ì˜ˆì•½ì€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.
  </div>
  {% else %}
  <div class="alert alert-info text-center">
    ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.<br>
    ìŠ¹ì¸ í›„ ì´ë©”ì¼ë¡œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
  </div>
  {% endif %}
</div>
{% endblock %}

{% block script %}
<style>
  body {
    background-color: #f3ede7;
    font-family: 'Inter', sans-serif;
    color: #5e4634;
  }

  .coffee-card {
    background-color: #fffdfc;
    border-radius: 1rem;
    max-width: 600px;
    margin: 2rem auto;
  }

  .booking-info {
    background-color: #f9f6f2;
    padding: 1.5rem;
    border-radius: 0.5rem;
  }

  .info-row {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid #e8dfd5;
  }

  .info-row:last-child {
    border-bottom: none;
  }

  .info-row .label {
    font-weight: 600;
    color: #6b4c3b;
  }

  .info-row .value {
    text-align: right;
    color: #5e4634;
  }

  .coffee-btn-outline {
    background-color: white;
    color: #6b4c3b;
    border: 2px solid #6b4c3b;
    transition: all 0.2s ease-in-out;
  }

  .coffee-btn-outline:hover {
    background-color: #6b4c3b;
    color: white;
  }

  .action-buttons {
    margin-top: 1.5rem;
  }

  .alert-warning {
    background-color: #fff3cd;
    border-color: #ffc107;
    color: #856404;
  }

  .alert-info {
    background-color: #e8f4f8;
    border-color: #b3d9e6;
    color: #31708f;
  }

  .alert-secondary {
    background-color: #e2e3e5;
    border-color: #d6d8db;
    color: #383d41;
  }
</style>
{% endblock %}
